var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):
$jscomp.POLYFILL_PREFIX+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};
$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function(a){this.abruptCompletion_={"return":a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};
$jscomp.generator.Context.prototype.yieldAll=function(a,b){var c=$jscomp.makeIterator(a),d=c.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=c,this.yield(d.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){var c=this.finallyContexts_.splice(b||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_["return"]);this.context_["return"](a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a["return"],done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this["throw"]=function(b){return a.throw_(b)};this["return"]=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){var c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(c,a.prototype);return c};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a["throw"](d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
var setting=null,confirmType=null;function loadLocalStorage(a){if(!window.localStorage)return null;try{return JSON.parse(window.localStorage.getItem(a))}catch(b){return null}}
function saveLocalStorage(a,b){if(!window.localStorage||0===a.length)return!1;try{return window.localStorage.setItem(a,JSON.stringify(b)),!0}catch(d){var c=$("#modal_confirm");c.find(".modal-body").html('\n\t\t\t<div class="h6">\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002</div>\n\t\t\t<div class="m-3 font_size_12">\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u306eLocalStrage\u4fdd\u5b58\u9818\u57df\u4e0a\u9650\u306b\u9054\u3057\u305f\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</div>\n\t\t\t<div class="mx-3 font_size_12">\u4e0d\u8981\u306a\u7de8\u6210\u30c7\u30fc\u30bf\u306e\u524a\u9664\u3084\u3001\u5c55\u958b\u3057\u3066\u3044\u308b\u7de8\u6210\u30bf\u30d6\u3092\u9589\u3058\u3001\u518d\u5ea6\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</div>\n\t\t');confirmType=
"strageOver";c.modal("show");return!1}}function deleteLocalStorage(a){if(!window.localStorage||0===a.length)return!1;window.localStorage.removeItem(a);return!0}function loadSessionStorage(a){if(!window.sessionStorage)return null;try{return JSON.parse(window.sessionStorage.getItem(a))}catch(b){return null}}
function saveSessionStorage(a,b){if(!window.sessionStorage||0===a.length)return!1;try{return window.sessionStorage.setItem(a,JSON.stringify(b)),!0}catch(c){return inform_danger("\u30c7\u30fc\u30bf\u4fdd\u5b58\u30a8\u30e9\u30fc"),!1}}
function initializeSetting(){(setting=loadLocalStorage("setting"))||(setting={});setting.hasOwnProperty("version")||(setting.version="0.0.0");setting.hasOwnProperty("adaptedVersion")||(setting.adaptedVersion="0.0.0");setting.hasOwnProperty("simulateCount")||(setting.simulateCount=5E3);setting.hasOwnProperty("emptySlotInvisible")||(setting.emptySlotInvisible=!1);setting.hasOwnProperty("inStockOnly")||(setting.inStockOnly=!1);setting.hasOwnProperty("isDivideStock")||(setting.isDivideStock=!1);setting.hasOwnProperty("visibleEquipped")||
(setting.visibleEquipped=!1);setting.hasOwnProperty("visibleFinal")||(setting.visibleFinal=!0);setting.hasOwnProperty("enemyDisplayImage")||(setting.enemyDisplayImage=!0);setting.hasOwnProperty("enemyFleetDisplayImage")||(setting.enemyFleetDisplayImage=!0);setting.hasOwnProperty("copyToClipboard")||(setting.copyToClipboard=!1);setting.hasOwnProperty("selectedHistory")||(setting.selectedHistory=[[],[]]);setting.hasOwnProperty("orderByFrequency")||(setting.orderByFrequency=!1);setting.hasOwnProperty("themeColor")||
(setting.themeColor="normal_theme");setting.hasOwnProperty("contentsOrder")||(setting.contentsOrder=[]);setting.hasOwnProperty("favoriteOnly")||(setting.favoriteOnly=!1);setting.hasOwnProperty("favoritePlane")||(setting.favoritePlane=[]);setting.hasOwnProperty("visibleEquippedShip")||(setting.visibleEquippedShip=!1);setting.hasOwnProperty("inStockOnlyShip")||(setting.inStockOnlyShip=!1);setting.hasOwnProperty("favoriteOnlyShip")||(setting.favoriteOnlyShip=!1);setting.hasOwnProperty("favoriteShip")||
(setting.favoriteShip=[]);setting.hasOwnProperty("reducedDisplay")||(setting.reducedDisplay=!0);setting.hasOwnProperty("confirmTabClosing")||(setting.confirmTabClosing=!0);setting.hasOwnProperty("presetsOrder")||(setting.presetsOrder=1);setting.hasOwnProperty("uploadUserName")||(setting.uploadUserName="");setting.hasOwnProperty("planeOnly")||(setting.planeOnly=!0);setting.hasOwnProperty("hasSlotOnly")||(setting.hasSlotOnly=!0);setting.hasOwnProperty("visibleEmptyFolder")||(setting.visibleEmptyFolder=
!1);setting.hasOwnProperty("visibleAntiAirStatus")||(setting.visibleAntiAirStatus=!1);if(!setting.hasOwnProperty("defaultProf")){setting.defaultProf=[];var a=PLANE_TYPE.filter(function(d){return 0<d.id&&49!==d.id}),b=[6,9,10,41,45,48];a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,c={id:c.id,prof:b.includes(c.id)?7:0},setting.defaultProf.push(c)}setting.hasOwnProperty("displayMode")||(setting.displayMode={modal_plane_select:"single",modal_ship_select:"single",modal_enemy_select:"single"});
setting.hasOwnProperty("orderBy")||(setting.orderBy={landBase:"default",friendFleet:"default"});setting.hasOwnProperty("planeFilter")||(setting.planeFilter={landBase:["radius",0],friendFleet:["antiAir",0]});if(!setting.hasOwnProperty("presetFolders")){setting.presetFolders=[];for(b=1;20>b;b++)setting.presetFolders.push({id:b,name:"\u30d5\u30a9\u30eb\u30c0\u30fc"+b,isOpen:!1});setting.presetFolders.push({id:99,name:"\u30b4\u30df\u7bb1",isOpen:!1})}adaptUpdater();saveSetting();setting.reducedDisplay&&
reduced_display_Clicked()}
function adaptUpdater(){setting.version!==LATEST_VERSION&&document.getElementsByClassName("version_detail")[0]&&document.getElementsByClassName("version_detail")[0].classList.add("unread");if(setting.adaptedVersion!==LATEST_VERSION){var a=setting.adaptedVersion.split("."),b=castInt(a[1]),c=castInt(a[2]);a=4<=a.length?castInt(a[3]):0;if(8>=b){var d=loadLocalStorage("planeStock");d&&0<d.length&&!d[0].num.length&&deleteLocalStorage("planeStock");setting.hasOwnProperty("copyToClipbord")&&(setting.copyToClipboard=
setting.copyToClipbord,delete setting.copyToClipbord);setting.hasOwnProperty("visibleEquiped")&&(setting.visibleEquipped=setting.visibleEquiped,delete setting.visibleEquiped);deleteLocalStorage("version");deleteLocalStorage("autoSave");deleteLocalStorage("simulateCount");deleteLocalStorage("emptySlotInvisible");deleteLocalStorage("modalDisplayMode");deleteLocalStorage("defaultProf")}9>=b&&(1>c&&(setting.enemyFleetDisplayImage=!0),2>=c&&1>a&&(setting.orderBy={landBase:"default",friendFleet:"default"}));
if(10>=b){if(9>=b){if(presets=loadLocalStorage("presets")){var e=$jscomp.makeIterator(presets);for(d=e.next();!d.done;d=e.next())d=d.value,d[0]=getUniqueId()+d[0];saveLocalStorage("presets",presets)}setting.hasOwnProperty("backUpEnabled")&&delete setting.backUpEnabled;setting.hasOwnProperty("backUpCount")&&delete setting.backUpCount;setting.hasOwnProperty("autoSave")&&delete setting.autoSave;deleteLocalStorage("backUpPresets");deleteLocalStorage("autoSaveData")}if(9>=b||1>c)if(d=loadLocalStorage("planePreset")){e=
$jscomp.makeIterator(d);for(var f=e.next();!f.done;f=e.next()){f=f.value;for(var g=[],h=$jscomp.makeIterator(f.planes),k=h.next();!k.done;k=h.next())g.push({id:k.value,remodel:0});f.planes=g}saveLocalStorage("planePreset",d)}if(9>=b||2>c)if(e=loadLocalStorage("presets")){f=formatDate(new Date,"yyyy/MM/dd HH:mm:ss");g=0;h=$jscomp.makeIterator(e);for(d=h.next();!d.done;d=h.next())d=d.value,5>d.length&&d.push(f+"."+("000"+g++).slice(-3));saveLocalStorage("presets",e)}}if(11>=b&&((10>=b||1>c)&&delete setting.airRaidMax,
10>=b||3>c||3===c&&3>=a)){setting.defaultProf=[];a=PLANE_TYPE.filter(function(l){return 0<l&&49!==l});c=[6,9,10,41,45,48];a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d={id:d,prof:c.includes(d)?7:0},setting.defaultProf.push(d);setting.initialProf120=[]}12>=b&&11>=b&&(delete setting.invisibleCutin,delete setting.isUnion);setting.adaptedVersion=LATEST_VERSION}}function saveSetting(){saveLocalStorage("setting",setting)}
function reduced_display_Clicked(){var a=document.getElementById("reduced_display");a&&(a.classList.contains("checked")?(a.classList.remove("checked"),a.textContent="\u7e2e\u5c0f\u8868\u793aOFF",document.getElementById("main").classList.remove("reduced")):(a.classList.add("checked"),a.textContent="\u7e2e\u5c0f\u8868\u793aON",document.getElementById("main").classList.add("reduced")),setting.reducedDisplay=a.classList.contains("checked"),saveSetting())}
function readDeckBuilder(a){if(!a)return null;-1<a.indexOf("?predeck=")&&(a=a.split("?predeck=")[1]);try{a=decodeURIComponent(a).trim('"');var b=JSON.parse(a),c=[],d=[[],[-1,-1,-1]];Object.keys(b).forEach(function(h){var k=b[h];if("version"!==h&&k){if(0===h.indexOf("a")&&k.hasOwnProperty("items")){var l=castInt(h.replace("a",""))-1;d[1][l]=k.hasOwnProperty("mode")?1===k.mode?2:2===k.mode?0:-1:-1;Object.keys(k.items).forEach(function(w){var m=k.items[w];if(m&&m.hasOwnProperty("id")){var v=[0,0,0,18,
castInt(w.replace("i",""))-1+4*l];Object.keys(m).forEach(function(p){"id"===p?v[0]=castInt(m[p]):"mas"===p?v[1]=castInt(m[p]):"rf"===p&&(v[2]=castInt(m[p]))});d[0].push(v)}})}if(0===h.indexOf("f")){var n=castInt(h.replace("f",""))-1;if(!(1<n)){var r=[n,[]];Object.keys(k).forEach(function(w){var m=k[w];if(m&&m.hasOwnProperty("items")){var v=castInt(m.id),p=SHIP_DATA.find(function(q){return q.api===v});p||(p={id:0,slot:[0,0,0,0]});var x=99;m.hasOwnProperty("lv")&&(x=(x=castInt(m.lv))?x:99);var y=-1;
m.hasOwnProperty("luck")&&(y=(y=castInt(m.luck))?y:-1);var A=[p.id,[],castInt(w.replace("s",""))-1+6*n,0,x,0,y];Object.keys(m.items).forEach(function(q){var u=m.items[q];if(u&&u.hasOwnProperty("id")&&ITEM_DATA.find(function(t){return t.id===castInt(u.id)})){q=castInt(q.replace("i",""))-1;var B=0;-1>q||q>=p.slot.length?q=-1:B=castInt(p.slot[q]);var z=[0,0,0,B,q];Object.keys(u).forEach(function(t){"id"===t?z[0]=castInt(u[t]):"mas"===t?z[1]=castInt(u[t]):"rf"===t&&(z[2]=castInt(u[t]))});A[1].push(z)}});
r[1].push(A)}});c.push(r)}}}});var e=c.find(function(h){return 0===h[0]})[1];if(2<=c.length){var f=c.find(function(h){return 1===h[0]})[1],g=e.concat(f);return[d,g,[]]}return[d,e,[]]}catch(h){return null}}
function readShipJson(a){try{for(var b=JSON.parse(a),c=loadShipStock(),d=$jscomp.makeIterator(c),e=d.next();!e.done;e=d.next())e.value.num=0;a={};for(var f=$jscomp.makeIterator(b),g=f.next();!g.done;a={$jscomp$loop$prop$shipId$25:a.$jscomp$loop$prop$shipId$25},g=f.next()){var h=g.value;if(!h.hasOwnProperty("api_ship_id"))return!1;a.$jscomp$loop$prop$shipId$25=h.api_ship_id;var k=c.find(function(l){return function(n){return n.deck===l.$jscomp$loop$prop$shipId$25}}(a));k&&k.num++}c.sort(function(l,
n){return l.id-n.id});saveLocalStorage("shipStock",c);setting.inStockOnlyShip=!0;saveSetting()}catch(l){return!1}return!0}
function readEquipmentJson(a){try{for(var b=JSON.parse(a),c=loadPlaneStock(),d=$jscomp.makeIterator(c),e=d.next();!e.done;e=d.next())e.value.num=[0,0,0,0,0,0,0,0,0,0,0];a={};for(var f=$jscomp.makeIterator(b),g=f.next();!g.done;a={$jscomp$loop$prop$planeId$27:a.$jscomp$loop$prop$planeId$27},g=f.next()){var h=g.value;if(!h.hasOwnProperty("api_slotitem_id")||!h.hasOwnProperty("api_level"))return!1;a.$jscomp$loop$prop$planeId$27=h.api_slotitem_id;var k=h.api_level,l=c.find(function(n){return function(r){return r.id===
n.$jscomp$loop$prop$planeId$27}}(a));l&&l.num[k]++}c.sort(function(n,r){return n.id-r.id});saveLocalStorage("planeStock",c);setting.inStockOnly=!0;saveSetting()}catch(n){return!1}return!0}function decodePreset(a){try{var b=b64_to_utf8(a);return JSON.parse(b)}catch(c){return[[],[],[]]}}
function loadPlaneStock(){var a=loadLocalStorage("planeStock");if(a&&a.length){var b={},c=$jscomp.makeIterator(ITEM_DATA);for(d=c.next();!d.done;b={$jscomp$loop$prop$plane$20$29:b.$jscomp$loop$prop$plane$20$29},d=c.next())b.$jscomp$loop$prop$plane$20$29=d.value,a.find(function(e){return function(f){return f.id===e.$jscomp$loop$prop$plane$20$29.id}}(b))||(a.push({id:b.$jscomp$loop$prop$plane$20$29.id,num:[0,0,0,0,0,0,0,0,0,0,0]}),saveLocalStorage("planeStock",a))}else{a=[];b=$jscomp.makeIterator(ITEM_DATA);
for(var d=b.next();!d.done;d=b.next())a.push({id:d.value.id,num:[0,0,0,0,0,0,0,0,0,0,0]});a=a.concat();saveLocalStorage("planeStock",a)}return a}
function loadShipStock(){var a=loadLocalStorage("shipStock"),b=SHIP_DATA;if(!a||!a.length){a=[];var c=$jscomp.makeIterator(b);for(b=c.next();!b.done;b=c.next())b=b.value,a.push({id:b.id,num:0,deck:b.api});a=a.concat();saveLocalStorage("shipStock",a)}else if(a.length!==b.length){c={};var d=$jscomp.makeIterator(b);for(b=d.next();!b.done;c={$jscomp$loop$prop$ship$21$31:c.$jscomp$loop$prop$ship$21$31},b=d.next())c.$jscomp$loop$prop$ship$21$31=b.value,a.find(function(e){return function(f){return f.id===
e.$jscomp$loop$prop$ship$21$31.id}}(c))||(a.push({id:c.$jscomp$loop$prop$ship$21$31.id,num:0,deck:c.$jscomp$loop$prop$ship$21$31.api}),saveLocalStorage("shipStock",a))}return a}function getUniqueId(){return(new Date).getTime().toString(16)}function castInt(a,b){b=void 0===b?0:b;var c=parseInt(a);return isNaN(c)?b:c}function castFloat(a,b){b=void 0===b?0:b;var c=parseFloat(a);return isNaN(c)?b:c}function utf8_to_b64(a){try{return LZString.compressToEncodedURIComponent(a)}catch(b){return""}}
function b64_to_utf8(a){try{return LZString.decompressFromEncodedURIComponent(a)}catch(b){return""}}function getUrlParams(){var a=location.search;if(""===a)return{};var b={};a=$jscomp.makeIterator(a.slice(1).split("&"));for(var c=a.next();!c.done;c=a.next())c=c.value.split("="),b[c[0]]=c[1];window.history.replaceState(null,null,location.pathname);return b}function inform_success(a){inform_custom_alert(a,0)}function inform_warning(a){inform_custom_alert(a,1)}
function inform_danger(a){inform_custom_alert(a,2)}function inform_custom_alert(a,b){var c=document.getElementById("custom_alert_wraper");c.innerHTML="";var d=document.createElement("div");d.id="custom_alert_body";d.textContent=a;switch(b){case 0:d.className="alert-success";break;case 1:d.className="alert-warning";break;case 2:d.className="alert-danger"}c.appendChild(d)}
function formatDate(a,b){b=b.replace(/yyyy/g,a.getFullYear());b=b.replace(/MM/g,("0"+(a.getMonth()+1)).slice(-2));b=b.replace(/dd/g,("0"+a.getDate()).slice(-2));b=b.replace(/HH/g,("0"+a.getHours()).slice(-2));b=b.replace(/mm/g,("0"+a.getMinutes()).slice(-2));b=b.replace(/ss/g,("0"+a.getSeconds()).slice(-2));return b=b.replace(/SSS/g,("00"+a.getMilliseconds()).slice(-3))}
function postURLData(a){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(b={longDynamicLink:"https://aircalc.page.link/?link="+a,suffix:{option:"SHORT"}},c.yield(fetch("https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key="+xxx,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(function(d){return d.json()}),2)):c["return"](c.yieldResult)})}
function createDiv(a,b,c){a=void 0===a?"":a;b=void 0===b?"":b;c=void 0===c?"":c;var d=document.createElement("div");a&&(d.className=a);b&&(d.id=b);c&&(d.textContent=c);return d}
function setTab(){var a=loadLocalStorage("activePresets");a||(a={activeId:"",presets:[]});for(var b=loadLocalStorage("presets"),c=document.createDocumentFragment(),d={},e=$jscomp.makeIterator(a.presets),f=e.next();!f.done;d={$jscomp$loop$prop$tabData$33:d.$jscomp$loop$prop$tabData$33},f=e.next()){d.$jscomp$loop$prop$tabData$33=f.value;var g=b?b.find(function(n){return function(r){return r[0]===n.$jscomp$loop$prop$tabData$33.id}}(d)):null;f=document.createElement("div");f.className="d-flex fleet_tab "+
(a.activeId===d.$jscomp$loop$prop$tabData$33.id?"active":"");f.dataset.presetid=d.$jscomp$loop$prop$tabData$33.id;var h=document.createElement("div");h.className="align-self-center fleet_tab_icon";if(g){var k=d.$jscomp$loop$prop$tabData$33.history.histories[d.$jscomp$loop$prop$tabData$33.history.index];h.style.color="#adf";g[2]!==k?(h.innerHTML="&#8727;",f.classList.add("unsaved")):h.innerHTML='<i class="fas fa-file-text"></i>'}else h.innerHTML="&#63;",h.style.color="#fff",f.classList.add("unsaved");
k=document.createElement("div");k.className="align-self-center fleet_name ml-2 flex-grow-1";k.textContent=g?g[1]:d.$jscomp$loop$prop$tabData$33.name?d.$jscomp$loop$prop$tabData$33.name:"\u7121\u984c";g=document.createElement("input");g.type="text";g.maxLength=50;g.className=" ml-2 d-none fleet_name_input flex-grow-1";g.value=k.textContent;var l=document.createElement("div");l.className="align-self-center btn_close_tab ml-auto";l.innerHTML="&times;";f.appendChild(h);f.appendChild(k);f.appendChild(g);
f.appendChild(l);c.appendChild(f)}20>a.presets.length&&(a=createDiv("d-flex fleet_tab","add_new_tab"),a.dataset.presetid="",a.title="\u65b0\u3057\u3044\u7de8\u6210\u30bf\u30d6\u3092\u958b\u304f",b=createDiv(),b.innerHTML="&#43",a.appendChild(b),c.appendChild(a));document.getElementById("fleet_tab_container").innerHTML="";document.getElementById("fleet_tab_container").appendChild(c)}
function activeTabChanged(a){$("#header .fleet_tab").removeClass("active");a.addClass("active");var b=loadLocalStorage("activePresets");b||(b={activeId:"",presets:[]});b.activeId=a[0].dataset.presetid;saveLocalStorage("activePresets",b)}function btn_add_new_tab_Clicked(){$("#header .fleet_tab").removeClass("active");var a=loadLocalStorage("activePresets");a||(a={activeId:"",presets:[]});a.activeId="";saveLocalStorage("activePresets",a)}
function closeActiveTab(a){a=a.closest(".fleet_tab");if(a.hasClass("unsaved")&&setting.confirmTabClosing){var b=$("#modal_confirm");b.find(".modal-body").html('\n\t\t\t<div class="h6">\u672a\u4fdd\u5b58\u306e\u5909\u66f4\u5185\u5bb9\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u306e\u307e\u307e\u30bf\u30d6\u3092\u9589\u3058\u307e\u3059\u304b\uff1f</div>\n\t\t\t<div class="mt-3 font_size_12">\u623b\u3063\u3066\u4fdd\u5b58\u3059\u308b\u306b\u306f\u3001\u753b\u9762\u4e0a\u90e8\u306e\u300c\u7de8\u6210\u4fdd\u5b58\u300d\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002</div>\n\t\t\t<div class="font_size_12">\u5909\u66f4\u5185\u5bb9\u3092\u7834\u68c4\u3057\u3066\u30bf\u30d6\u3092\u9589\u3058\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u307e\u307eOK\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002</div>\n\t\t\t<div class="mt-3 font_size_11">\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u7de8\u6210\u4e00\u89a7\u30da\u30fc\u30b8\u306e\u300c\u5171\u901a\u8a2d\u5b9a\u300d\u6b04\u3067\u7121\u52b9\u306b\u3067\u304d\u307e\u3059\u3002</div>\n\t\t');
b[0].dataset.target=a[0].dataset.presetid;confirmType="deleteTab";b.modal("show")}else closeTab(a[0].dataset.presetid)}function closeTab(a){var b=loadLocalStorage("activePresets");b.presets=b.presets.filter(function(c){return c.id!==a});b.activeId===a&&(b.activeId="");saveLocalStorage("activePresets",b);b.presets.length||window.location.href.endsWith("/list/")?setTab():window.location.href="../list/"}
function getActivePreset(){var a=loadLocalStorage("activePresets"),b={id:"",name:"",history:{index:0,histories:[]}},c=$("#fleet_tab_container").find(".fleet_tab.active")[0];if(a&&a.activeId)if(c&&a.activeId===c.dataset.presetid){var d=a.presets.find(function(e){return e.id===a.activeId});d&&(b=d)}else c&&(d=a.presets.find(function(e){return e.id===c.dataset.presetid}))&&(b=d,a.activeId=c.dataset.presetid,saveLocalStorage("activePresets",a));else c&&(d=a.presets.find(function(e){return e.id===c.dataset.presetid}))&&
(b=d,a.activeId=c.dataset.presetid,saveLocalStorage("activePresets",a));return b}function updateActivePreset(a){var b=loadLocalStorage("activePresets");b||(b={activeId:"",presets:[]});var c=b.presets.findIndex(function(d){return d.id===a.id});0<=c?b.presets[c]=a:(b.presets.push(a),b.activeId=a.id,setTab());saveLocalStorage("activePresets",b)}var xxx="AIzaSyC_rEnvKFFlZv54xvxP8MXPht081xYol4s";
function getMaxUntitled(){var a=loadLocalStorage("activePresets");if(!a)return"\u7121\u984c1";var b=/\u7121\u984c\d+/,c=0;a=$jscomp.makeIterator(a.presets);for(var d=a.next();!d.done;d=a.next())d=d.value,b.test(d.name)&&(d=castInt(d.name.replace("\u7121\u984c","")),c<d&&(c=d));return"\u7121\u984c"+(c+1)}
function btn_reset_localStorage_Clicked(){var a=$("#modal_confirm");a.find(".modal-body").html('\n\t\t<div>\u30d6\u30e9\u30a6\u30b6\u306b\u4fdd\u5b58\u3055\u308c\u305f\u5165\u529b\u30fb\u8a2d\u5b9a\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3057\u307e\u3059\u3002</div>\n\t\t<div class="mt-3">\u767b\u9332\u30fb\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u7de8\u6210\u30c7\u30fc\u30bf\u3084\u88c5\u5099\u30d7\u30ea\u30bb\u30c3\u30c8\u3001\u6240\u6301\u88c5\u5099\u60c5\u5831\u3084\u5404\u7a2e\u8a73\u7d30\u8a2d\u5b9a\u5024\u306a\u3069\u5168\u3066\u306e\u30c7\u30fc\u30bf\u304c\u524a\u9664\u3055\u308c\u307e\u3059\u3002</div>\n\t\t<div>\u524a\u9664\u3057\u305f\u30c7\u30fc\u30bf\u306f\u5143\u306b\u623b\u305b\u307e\u305b\u3093\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</div>\n\t\t<div class="mt-3">\u672c\u30b5\u30a4\u30c8\u306e\u5229\u7528\u3092\u4e2d\u6b62\u3059\u308b\u5834\u5408\u3001\u524a\u9664\u5f8c\u306b\u30da\u30fc\u30b8\u3092\u518d\u8aad\u307f\u8fbc\u307f\u3057\u3066\u3057\u307e\u3046\u3068\u518d\u5ea6\u8a2d\u5b9a\u30c7\u30fc\u30bf\u304c\u751f\u6210\u3055\u308c\u308b\u305f\u3081\u3001\u524a\u9664\u5f8c\u306f\u76f4\u3061\u306b\u30b5\u30a4\u30c8\u3092\u9589\u3058\u3066\u304f\u3060\u3055\u3044\u3002</div>\n\t\t<div class="mt-3">\u3088\u308d\u3057\u3051\u308c\u3070\u3001OK\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002</div>\n\t');confirmType=
"deleteLocalStorageAll";a.modal("show")}var fb=null;function initializeFB(){firebase.initializeApp({apiKey:xxx,projectId:"development-74af0"});fb=firebase.firestore()}
document.addEventListener("DOMContentLoaded",function(){initializeSetting();$("#header").on("click","#reduced_display",reduced_display_Clicked);$("#header").on("click",".fleet_tab",function(){activeTabChanged($(this))});$("#header").on("click",".btn_close_tab",function(a){a.stopPropagation();closeActiveTab($(this))});$("#header").on({mousedown:function(a){if(1===a.button)return a.stopPropagation(),closeActiveTab($(this)),!1}},".fleet_tab");$("#modal_confirm").on("hide.bs.modal",function(){"Error"!==
confirmType&&(confirmType=null)});$("#modal_confirm").on("click",".btn_ok",function(){var a=$("#modal_confirm");"deleteTab"===confirmType?(closeTab(a[0].dataset.target),a.modal("hide")):"strageOver"===confirmType&&a.modal("hide")});Sortable.create(document.getElementById("fleet_tab_container"),{animation:200,delay:100,handle:".fleet_tab:not(.editting)",scroll:!0,filter:"#add_new_tab",onEnd:function(){var a=loadLocalStorage("activePresets");if(a){for(var b={activeId:"",presets:[]},c={},d=$jscomp.makeIterator(document.getElementsByClassName("fleet_tab")),
e=d.next();!e.done;c={$jscomp$loop$prop$tab$35:c.$jscomp$loop$prop$tab$35},e=d.next())c.$jscomp$loop$prop$tab$35=e.value,(e=a.presets.find(function(f){return function(g){return g.id===f.$jscomp$loop$prop$tab$35.dataset.presetid}}(c)))&&b.presets.push(e);b.activeId=a.activeId;saveLocalStorage("activePresets",b)}}})});